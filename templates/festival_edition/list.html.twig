{% extends 'base.html.twig' %}

{% block body %}
    <style>
        .festival-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
        }

        .festival-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .festival-title {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .festival-info {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .editions-section {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section-title {
            font-size: 1.8rem;
            color: #333;
            margin: 0;
        }

        .btn-new-edition {
            background: linear-gradient(135deg, #ff8c00 0%, #ff5f6d 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .btn-new-edition:hover {
            transform: translateY(-2px);
            text-decoration: none;
            color: white;
        }

        .editions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .edition-card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .edition-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .edition-year {
            font-size: 1.4rem;
            font-weight: bold;
            color: #495057;
            margin-bottom: 15px;
        }

        .edition-details {
            margin-bottom: 15px;
        }

        .edition-detail {
            margin-bottom: 8px;
            color: #6c757d;
        }

        .edition-detail strong {
            color: #495057;
        }

        .edition-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #dee2e6;
        }

        .btn-edit {
            background: #28a745;
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            font-size: 0.9rem;
            transition: background 0.2s;
        }

        .btn-edit:hover {
            background: #218838;
            text-decoration: none;
            color: white;
        }

        .btn-delete {
            background: #dc3545;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.2s;
        }

        .btn-delete:hover {
            background: #c82333;
        }

        .no-editions {
            text-align: center;
            color: #6c757d;
            font-style: italic;
            padding: 40px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
    </style>

    <div class="festival-container">
        <a href="{{ path('festival_index') }}" class="back-link">‚Üê Back to Festivals</a>

        <div class="festival-header">
            <h1 class="festival-title">{{ festival.name }}</h1>
        </div>

        <div class="festival-info">
            <h2>Festival Information</h2>
            <div class="info-grid">
                <div class="edition-detail">
                    <strong>Country:</strong> {{ festival.country }}
                </div>
                <div class="edition-detail">
                    <strong>City:</strong> {{ festival.city }}
                </div>
                <div class="edition-detail">
                    <strong>Address:</strong> {{ festival.streetName }} {{ festival.streetNo }}
                </div>
                <div class="edition-detail">
                    <strong>Email:</strong> {{ festival.festivalEmail }}
                </div>
                {% if festival.website %}
                    <div class="edition-detail">
                        <strong>Website:</strong> <a href="{{ festival.website }}" target="_blank">{{ festival.website }}</a>
                    </div>
                {% endif %}
                {% if festival.logoUrl %}
                    <div class="edition-detail">
                        <strong>Logo:</strong> <a href="{{ festival.logoUrl }}" target="_blank">View Logo</a>
                    </div>
                {% endif %}
                <div class="edition-detail">
                    <strong>Last Updated:</strong> {{ festival.updatedAt|date('F j, Y') }}
                </div>
            </div>
        </div>

        <div class="editions-section">
            <div class="section-header">
                <h2 class="section-title">Festival Editions</h2>
                <a href="{{ path('festival_edition_new', {'festival': festival.id}) }}" class="btn-new-edition">
                    Add New Edition
                </a>
            </div>


            {% for message in app.flashes('success') %}
                <div class="alert alert-success">
                    {{ message }}
                </div>
            {% endfor %}

            {% if editions|length > 0 %}
                <div class="editions-grid">
                    {% for edition in editions %}
                        <div class="edition-card">
                            <div class="edition-year">{{ edition.yearHappened }} Edition</div>

                            <div class="edition-details">
                                <div class="edition-detail">
                                    <strong>Venue:</strong> {{ edition.venueName }}
                                </div>
                                <div class="edition-detail">
                                    <strong>Start Date:</strong> {{ edition.startDate|date('F j, Y') }}
                                </div>
                                <div class="edition-detail">
                                    <strong>End Date:</strong> {{ edition.endDate|date('F j, Y') }}
                                </div>
                                <div class="edition-detail">
                                    <strong>Status:</strong> {{ edition.status }}
                                </div>
                                <div class="edition-detail">
                                    <strong>Capacity:</strong> {{ edition.peopleCapacity|number_format }}
                                </div>
                                {% if edition.description %}
                                    <div class="edition-detail">
                                        <strong>Description:</strong> {{ edition.description|slice(0, 100) }}{% if edition.description|length > 100 %}...{% endif %}
                                    </div>
                                {% endif %}
                            </div>

                            <div class="edition-actions">
                                <a href="{{ path('festival_edition_edit', {'id': edition.id}) }}" class="btn-edit">
                                    Edit
                                </a>
                                <form method="post" action="{{ path('festival_edition_delete', {'id': edition.id}) }}"
                                      style="display: inline-block;"
                                      onsubmit="return confirm('Are you sure you want to delete the {{ edition.yearHappened }} edition?');">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ edition.id) }}">
                                    <button type="submit" class="btn-delete">Delete</button>
                                </form>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <div class="no-editions">
                    <p>No editions have been created for this festival yet.</p>
                    <p>Click "Add New Edition" to create the first one!</p>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
