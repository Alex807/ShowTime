{% extends 'base.html.twig' %}

{% block title %}SoundScape Hub - Profile{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --light-bg: #ecf0f1;
            --white: #ffffff;
            --text-dark: #2c3e50;
            --text-muted: #7f8c8d;
            --border-color: #bdc3c7;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        body {
            background-color: var(--light-bg);
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--text-dark);
        }

        .profile-container {
            padding: 40px 0;
            max-width: 1400px;
        }

        /* Role Image Frame */
        .role-image-container {
            position: relative;
            margin-bottom: 30px;
        }

        .role-image-frame {
            background: var(--white);
            padding: 15px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            width: 280px;
            height: 350px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .role-image-frame:hover {
            box-shadow: var(--shadow-hover);
            border-color: var(--accent-color);
        }

        .role-image {
            width: 100%;
            height: 280px;
            object-fit: contain;
            object-position: center;
            border-radius: 4px;
            margin-bottom: 15px;
            background-color: #f8f9fa;
        }

        .role-badge {
            background: var(--primary-color);
            color: var(--white);
            padding: 8px 20px;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .role-badge.user { background: var(--accent-color); }
        .role-badge.admin { background: var(--warning-color); }
        .role-badge.owner { background: var(--success-color); }

        /* Profile Card */
        .profile-card {
            background: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .profile-header {
            background: var(--primary-color);
            color: var(--white);
            padding: 30px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .profile-header.user { background: var(--accent-color); }
        .profile-header.admin { background: var(--warning-color); }
        .profile-header.owner { background: var(--success-color); }

        .profile-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .profile-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 400;
        }

        /* Information Cards */
        .info-card {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 25px;
            height: 100%;
            transition: all 0.3s ease;
        }

        .info-card:hover {
            border-color: var(--accent-color);
            box-shadow: var(--shadow);
        }

        .info-card-title {
            color: var(--text-dark);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #f8f9fa;
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.95rem;
        }

        .info-value {
            color: var(--text-muted);
            font-weight: 500;
            font-size: 0.95rem;
        }

        /* Action Panel */
        .action-panel {
            background: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-top: 30px;
        }

        .action-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-bg);
        }

        /* Action Buttons */
        .action-btn {
            background: var(--white);
            border: 2px solid var(--border-color);
            color: var(--text-dark);
            padding: 15px 20px;
            border-radius: 6px;
            font-weight: 600;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
            transition: all 0.3s ease;
            width: 100%;
            justify-content: flex-start;
        }

        .action-btn:hover {
            text-decoration: none;
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }

        .action-btn.user-btn {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .action-btn.user-btn:hover {
            background: var(--accent-color);
            color: var(--white);
        }

        .action-btn.list-btn {
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .action-btn.list-btn:hover {
            background: var(--success-color);
            color: var(--white);
        }

        .action-btn.new-btn {
            border-color: var(--accent-color);
            color: var(--accent-color);
        }

        .action-btn.new-btn:hover {
            background: var(--accent-color);
            color: var(--white);
        }

        .action-btn.edit-btn {
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .action-btn.edit-btn:hover {
            background: var(--warning-color);
            color: var(--white);
        }

        .action-btn.delete-btn {
            border-color: var(--danger-color);
            color: var(--danger-color);
        }

        .action-btn.delete-btn:hover {
            background: var(--danger-color);
            color: var(--white);
        }

        /* Category Headers */
        .category-header {
            background: var(--primary-color);
            color: var(--white);
            padding: 15px 20px;
            border-radius: 6px;
            margin: 20px 0 15px 0;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .role-image-frame {
                width: 100%;
                max-width: 280px;
                margin: 0 auto;
            }
        }

        @media (max-width: 768px) {
            .profile-container {
                padding: 20px 0;
            }

            .profile-title {
                font-size: 1.5rem;
            }

            .role-image-frame {
                height: 300px;
            }

            .role-image {
                height: 230px;
            }
        }
    </style>
{% endblock %}

{% block body %}
    <div class="container profile-container">
        {% set roles = user.getRoles() %}
        {% set isUser = 'ROLE_USER' in roles and 'ROLE_ADMIN' not in roles and 'ROLE_OWNER' not in roles %}
        {% set isAdmin = 'ROLE_ADMIN' in roles and 'ROLE_OWNER' not in roles %}
        {% set isOwner = 'ROLE_OWNER' in roles %}

        {% set roleClass = isUser ? 'user' : (isAdmin ? 'admin' : 'owner') %}
        {% set roleText = isUser ? 'User' : (isAdmin ? 'Admin' : 'Owner') %}

        <div class="row">
            <!-- Left Column: Role Image -->
            <div class="col-lg-3 col-md-4 col-sm-12">
                <div class="role-image-container">
                    <div class="role-image-frame">
                        <img src="{{ '/images/' ~ roleClass ~ '.jpg' }}"
                             alt="{{ roleText }} Profile"
                             class="role-image">
                        <div class="role-badge {{ roleClass }}">{{ roleText }}</div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Profile Content -->
            <div class="col-lg-9 col-md-8 col-sm-12">
                <!-- Profile Header Card -->
                <div class="profile-card">
                    <div class="profile-header {{ roleClass }}">
                        <h1 class="profile-title">
                            <i class="fas fa-user-tie"></i>
                            {{ userDetails.firstName }} {{ userDetails.lastName }}
                        </h1>
                        <p class="profile-subtitle">SoundScape Hub Professional Dashboard</p>
                    </div>

                    <!-- Profile Information -->
                    <div class="row g-4 p-4">
                        <div class="col-md-6">
                            <div class="info-card">
                                <h5 class="info-card-title">
                                    <i class="fas fa-chart-line text-primary"></i>
                                    Account Overview
                                </h5>
                                <div class="info-item">
                                    <span class="info-label">Email Address:</span>
                                    <span class="info-value">{{ user.email }}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Reviews Created:</span>
                                    <span class="info-value">{{ user.editionReviews|length }}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Total Purchases:</span>
                                    <span class="info-value">{{ user.purchases|length }}</span>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="info-card">
                                <h5 class="info-card-title">
                                    <i class="fas fa-id-card text-success"></i>
                                    Personal Information
                                </h5>
                                <div class="info-item">
                                    <span class="info-label">Age:</span>
                                    <span class="info-value">{{ userDetails.age }} years</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Phone Number:</span>
                                    <span class="info-value">{{ userDetails.phoneNo ?? 'Not provided' }}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Member Since:</span>
                                    <span class="info-value">{{ userDetails.createdAt|date('F j, Y') }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Panel -->
                <div class="action-panel">
                    <h3 class="action-title">
                        <i class="fas fa-tools me-2"></i>
                        {% if isUser %}Available Actions{% elseif isAdmin %}Administrative Panel{% else %}Owner Management Console{% endif %}
                    </h3>

                    {% if isUser %}
                        <!-- USER INTERFACE -->
                        <div class="row">
                            <div class="col-lg-6 col-md-12 mb-3">
                                <a href="{{ path('app_home_page') }}" class="action-btn user-btn">
                                    <i class="fas fa-home"></i>
                                    <span>Dashboard Home</span>
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-3">
                                <a href="{{ path('festival_index') }}" class="action-btn user-btn">
                                    <i class="fas fa-calendar-alt"></i>
                                    <span>Browse Festivals</span>
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-3">
                                <a href="{{ path('artist_index') }}" class="action-btn user-btn">
                                    <i class="fas fa-microphone-alt"></i>
                                    <span>Browse Artists</span>
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-3">
                                <a href="{{ path('amenity_index') }}" class="action-btn user-btn">
                                    <i class="fas fa-concierge-bell"></i>
                                    <span>Browse Amenities</span>
                                </a>
                            </div>
                        </div>

                    {% else %}
                        <!-- ADMIN/OWNER INTERFACE -->
                        {# Note: Owner interface is identical to Admin for now, but can be easily extended #}

                        <!-- Festival Management -->
                        <div class="category-header">
                            <i class="fas fa-calendar-alt"></i>
                            Festival Management
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('festival_index') }}" class="action-btn list-btn">
                                    <i class="fas fa-list"></i> List All Festivals
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('festival_new') }}" class="action-btn new-btn">
                                    <i class="fas fa-plus"></i> Create New Festival
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('festival_edit', {'id': 1}) }}" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i> Edit Festival
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('festival_delete', {'id': 1}) }}" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i> Delete Festival
                                </a>
                            </div>
                        </div>

                        <!-- Artist Management -->
                        <div class="category-header">
                            <i class="fas fa-microphone-alt"></i>
                            Artist Management
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('artist_index') }}" class="action-btn list-btn">
                                    <i class="fas fa-list"></i> List All Artists
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('artist_new') }}" class="action-btn new-btn">
                                    <i class="fas fa-plus"></i> Create New Artist
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('artist_edit', {'id': 1}) }}" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i> Edit Artist
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('artist_delete', {'id': 1}) }}" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i> Delete Artist
                                </a>
                            </div>
                        </div>

                        <!-- Amenity Management -->
                        <div class="category-header">
                            <i class="fas fa-concierge-bell"></i>
                            Amenity Management
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('amenity_index') }}" class="action-btn list-btn">
                                    <i class="fas fa-list"></i> List All Amenities
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('amenity_new') }}" class="action-btn new-btn">
                                    <i class="fas fa-plus"></i> Create New Amenity
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('amenity_edit', {'id': 1}) }}" class="action-btn edit-btn">
                                    <i class="fas fa-edit"></i> Edit Amenity
                                </a>
                            </div>
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('amenity_delete', {'id': 1}) }}" class="action-btn delete-btn">
                                    <i class="fas fa-trash"></i> Delete Amenity
                                </a>
                            </div>
                        </div>

                        {# FUTURE ENTITIES: Add new entity management sections here following the same pattern

                        <!-- Example: Purchase Management (Owner only) -->
                        {% if isOwner %}
                        <div class="category-header">
                            <i class="fas fa-shopping-cart"></i>
                            Purchase Management
                        </div>
                        <div class="row">
                            <div class="col-lg-6 col-md-12 mb-2">
                                <a href="{{ path('purchase_index') }}" class="action-btn list-btn">
                                    <i class="fas fa-list"></i> List All Purchases
                                </a>
                            </div>
                            <!-- Add more purchase actions here -->
                        </div>
                        {% endif %}

                        #}

                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}


{#{% extends 'base.html.twig' %}#}

{#{% block title %}SoundScape Hub - Profile{% endblock %}#}

{#{% block stylesheets %}#}
{#    {{ parent() }}#}
{#    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">#}
{#    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">#}
{#    <style>#}
{#        :root {#}
{#            --primary-color: #2c3e50;#}
{#            --secondary-color: #34495e;#}
{#            --accent-color: #3498db;#}
{#            --success-color: #27ae60;#}
{#            --warning-color: #f39c12;#}
{#            --danger-color: #e74c3c;#}
{#            --light-bg: #ecf0f1;#}
{#            --white: #ffffff;#}
{#            --text-dark: #2c3e50;#}
{#            --text-muted: #7f8c8d;#}
{#            --border-color: #bdc3c7;#}
{#            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);#}
{#            --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.15);#}
{#        }#}

{#        body {#}
{#            background-color: var(--light-bg);#}
{#            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;#}
{#            color: var(--text-dark);#}
{#        }#}

{#        .profile-container {#}
{#            padding: 40px 0;#}
{#            max-width: 1400px;#}
{#        }#}

{#        /* Role Image Frame */#}
{#        .role-image-container {#}
{#            position: relative;#}
{#            margin-bottom: 30px;#}
{#        }#}

{#        .role-image-frame {#}
{#            background: var(--white);#}
{#            padding: 15px;#}
{#            border-radius: 8px;#}
{#            box-shadow: var(--shadow);#}
{#            border: 2px solid var(--border-color);#}
{#            transition: all 0.3s ease;#}
{#            width: 280px;#}
{#            height: 350px;#}
{#            display: flex;#}
{#            flex-direction: column;#}
{#            align-items: center;#}
{#            justify-content: center;#}
{#        }#}

{#        .role-image-frame:hover {#}
{#            box-shadow: var(--shadow-hover);#}
{#            border-color: var(--accent-color);#}
{#        }#}

{#        .role-image {#}
{#            width: 100%;#}
{#            height: 280px;#}
{#            object-fit: contain; /* Changed from 'cover' to 'contain' */#}
{#            object-position: center; /* Centers the image within the container */#}
{#            border-radius: 4px;#}
{#            margin-bottom: 15px;#}
{#            background-color: #f8f9fa; /* Optional: adds a subtle background if image doesn't fill the space */#}
{#        }#}

{#        .role-badge {#}
{#            background: var(--primary-color);#}
{#            color: var(--white);#}
{#            padding: 8px 20px;#}
{#            border-radius: 4px;#}
{#            font-size: 0.9rem;#}
{#            font-weight: 600;#}
{#            text-transform: uppercase;#}
{#            letter-spacing: 0.5px;#}
{#        }#}

{#        .role-badge.user { background: var(--accent-color); }#}
{#        .role-badge.admin { background: var(--warning-color); }#}
{#        .role-badge.owner { background: var(--success-color); }#}

{#        /* Profile Card */#}
{#        .profile-card {#}
{#            background: var(--white);#}
{#            border-radius: 8px;#}
{#            box-shadow: var(--shadow);#}
{#            border: 1px solid var(--border-color);#}
{#            overflow: hidden;#}
{#        }#}

{#        .profile-header {#}
{#            background: var(--primary-color);#}
{#            color: var(--white);#}
{#            padding: 30px;#}
{#            border-bottom: 3px solid var(--secondary-color);#}
{#        }#}

{#        .profile-header.user { background: var(--accent-color); }#}
{#        .profile-header.admin { background: var(--warning-color); }#}
{#        .profile-header.owner { background: var(--success-color); }#}

{#        .profile-title {#}
{#            font-size: 1.8rem;#}
{#            font-weight: 700;#}
{#            margin-bottom: 8px;#}
{#            display: flex;#}
{#            align-items: center;#}
{#            gap: 12px;#}
{#        }#}

{#        .profile-subtitle {#}
{#            font-size: 1rem;#}
{#            opacity: 0.9;#}
{#            font-weight: 400;#}
{#        }#}

{#        /* Information Cards */#}
{#        .info-card {#}
{#            background: var(--white);#}
{#            border: 1px solid var(--border-color);#}
{#            border-radius: 6px;#}
{#            padding: 25px;#}
{#            height: 100%;#}
{#            transition: all 0.3s ease;#}
{#        }#}

{#        .info-card:hover {#}
{#            border-color: var(--accent-color);#}
{#            box-shadow: var(--shadow);#}
{#        }#}

{#        .info-card-title {#}
{#            color: var(--text-dark);#}
{#            font-size: 1.1rem;#}
{#            font-weight: 600;#}
{#            margin-bottom: 20px;#}
{#            display: flex;#}
{#            align-items: center;#}
{#            gap: 10px;#}
{#            padding-bottom: 10px;#}
{#            border-bottom: 2px solid var(--light-bg);#}
{#        }#}

{#        .info-item {#}
{#            display: flex;#}
{#            justify-content: space-between;#}
{#            align-items: center;#}
{#            padding: 10px 0;#}
{#            border-bottom: 1px solid #f8f9fa;#}
{#        }#}

{#        .info-item:last-child {#}
{#            border-bottom: none;#}
{#        }#}

{#        .info-label {#}
{#            font-weight: 600;#}
{#            color: var(--text-dark);#}
{#            font-size: 0.95rem;#}
{#        }#}

{#        .info-value {#}
{#            color: var(--text-muted);#}
{#            font-weight: 500;#}
{#            font-size: 0.95rem;#}
{#        }#}

{#        /* Action Panel */#}
{#        .action-panel {#}
{#            background: var(--white);#}
{#            border: 1px solid var(--border-color);#}
{#            border-radius: 8px;#}
{#            padding: 30px;#}
{#            box-shadow: var(--shadow);#}
{#            margin-top: 30px;#}
{#        }#}

{#        .action-title {#}
{#            font-size: 1.4rem;#}
{#            font-weight: 700;#}
{#            color: var(--text-dark);#}
{#            margin-bottom: 25px;#}
{#            text-align: center;#}
{#            padding-bottom: 15px;#}
{#            border-bottom: 2px solid var(--light-bg);#}
{#        }#}

{#        /* User Action Buttons */#}
{#        .user-action-btn {#}
{#            background: var(--white);#}
{#            border: 2px solid var(--accent-color);#}
{#            color: var(--accent-color);#}
{#            padding: 15px 20px;#}
{#            border-radius: 6px;#}
{#            font-weight: 600;#}
{#            text-decoration: none;#}
{#            display: flex;#}
{#            align-items: center;#}
{#            gap: 10px;#}
{#            margin-bottom: 12px;#}
{#            transition: all 0.3s ease;#}
{#            width: 100%;#}
{#            justify-content: flex-start;#}
{#        }#}

{#        .user-action-btn:hover {#}
{#            background: var(--accent-color);#}
{#            color: var(--white);#}
{#            text-decoration: none;#}
{#            transform: translateY(-1px);#}
{#            box-shadow: var(--shadow);#}
{#        }#}

{#        /* Admin/Owner Category Buttons */#}
{#        .category-btn {#}
{#            background: var(--white);#}
{#            border: 2px solid var(--border-color);#}
{#            color: var(--text-dark);#}
{#            padding: 18px 25px;#}
{#            border-radius: 6px;#}
{#            font-weight: 600;#}
{#            margin-bottom: 15px;#}
{#            transition: all 0.3s ease;#}
{#            width: 100%;#}
{#            display: flex;#}
{#            align-items: center;#}
{#            justify-content: space-between;#}
{#            cursor: pointer;#}
{#        }#}

{#        .category-btn:hover {#}
{#            border-color: var(--accent-color);#}
{#            color: var(--accent-color);#}
{#            box-shadow: var(--shadow);#}
{#        }#}

{#        .category-btn.active {#}
{#            background: var(--primary-color);#}
{#            border-color: var(--primary-color);#}
{#            color: var(--white);#}
{#        }#}

{#        .category-btn.active:hover {#}
{#            background: var(--secondary-color);#}
{#            border-color: var(--secondary-color);#}
{#        }#}

{#        /* Action Groups */#}
{#        .action-group {#}
{#            background: #f8f9fa;#}
{#            border: 1px solid var(--border-color);#}
{#            border-radius: 6px;#}
{#            padding: 20px;#}
{#            margin-top: 10px;#}
{#            margin-bottom: 15px;#}
{#            display: none;#}
{#        }#}

{#        .action-group.show {#}
{#            display: block;#}
{#            animation: slideDown 0.3s ease;#}
{#        }#}

{#        @keyframes slideDown {#}
{#            from { opacity: 0; transform: translateY(-10px); }#}
{#            to { opacity: 1; transform: translateY(0); }#}
{#        }#}

{#        .action-buttons-row {#}
{#            display: grid;#}
{#            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));#}
{#            gap: 10px;#}
{#            margin-bottom: 20px;#}
{#        }#}

{#        .action-sub-btn {#}
{#            background: var(--white);#}
{#            border: 1px solid var(--border-color);#}
{#            color: var(--text-dark);#}
{#            padding: 12px 16px;#}
{#            border-radius: 4px;#}
{#            font-weight: 500;#}
{#            font-size: 0.9rem;#}
{#            transition: all 0.3s ease;#}
{#            cursor: pointer;#}
{#        }#}

{#        .action-sub-btn:hover {#}
{#            background: var(--accent-color);#}
{#            border-color: var(--accent-color);#}
{#            color: var(--white);#}
{#            transform: translateY(-1px);#}
{#        }#}

{#        .action-sub-btn.list-btn:hover {#}
{#            background: var(--success-color);#}
{#            border-color: var(--success-color);#}
{#        }#}

{#        .action-sub-btn.edit-btn:hover {#}
{#            background: var(--warning-color);#}
{#            border-color: var(--warning-color);#}
{#        }#}

{#        .action-sub-btn.delete-btn:hover {#}
{#            background: var(--danger-color);#}
{#            border-color: var(--danger-color);#}
{#        }#}

{#        /* Search Box */#}
{#        .search-box {#}
{#            background: var(--white);#}
{#            border: 1px solid var(--border-color);#}
{#            border-radius: 6px;#}
{#            padding: 20px;#}
{#            margin-top: 15px;#}
{#            display: none;#}
{#        }#}

{#        .search-box.show {#}
{#            display: block;#}
{#            animation: slideDown 0.3s ease;#}
{#        }#}

{#        .search-input {#}
{#            border: 1px solid var(--border-color);#}
{#            border-radius: 4px;#}
{#            padding: 12px 15px;#}
{#            font-size: 0.95rem;#}
{#            transition: all 0.3s ease;#}
{#        }#}

{#        .search-input:focus {#}
{#            border-color: var(--accent-color);#}
{#            box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);#}
{#            outline: none;#}
{#        }#}

{#        .search-toggle {#}
{#            background: var(--light-bg);#}
{#            border: 1px solid var(--border-color);#}
{#            color: var(--text-dark);#}
{#            padding: 8px 16px;#}
{#            border-radius: 4px;#}
{#            font-size: 0.85rem;#}
{#            cursor: pointer;#}
{#            transition: all 0.3s ease;#}
{#            font-weight: 500;#}
{#        }#}

{#        .search-toggle.active {#}
{#            background: var(--accent-color);#}
{#            border-color: var(--accent-color);#}
{#            color: var(--white);#}
{#        }#}

{#        .execute-btn {#}
{#            background: var(--success-color);#}
{#            border: none;#}
{#            color: var(--white);#}
{#            padding: 12px 24px;#}
{#            border-radius: 4px;#}
{#            font-weight: 600;#}
{#            font-size: 0.9rem;#}
{#            transition: all 0.3s ease;#}
{#            cursor: pointer;#}
{#        }#}

{#        .execute-btn:hover {#}
{#            background: #229954;#}
{#            transform: translateY(-1px);#}
{#            box-shadow: var(--shadow);#}
{#        }#}

{#        /* Responsive Design */#}
{#        @media (max-width: 992px) {#}
{#            .role-image-frame {#}
{#                width: 100%;#}
{#                max-width: 280px;#}
{#                margin: 0 auto;#}
{#            }#}
{#        }#}

{#        @media (max-width: 768px) {#}
{#            .profile-container {#}
{#                padding: 20px 0;#}
{#            }#}

{#            .profile-title {#}
{#                font-size: 1.5rem;#}
{#            }#}

{#            .role-image-frame {#}
{#                height: 300px;#}
{#            }#}

{#            .role-image {#}
{#                height: 230px;#}
{#            }#}

{#            .action-buttons-row {#}
{#                grid-template-columns: 1fr;#}
{#            }#}
{#        }#}
{#    </style>#}
{#{% endblock %}#}

{#{% block body %}#}
{#    <div class="container profile-container">#}
{#        {% set roles = user.getRoles() %}#}
{#        {% set isUser = 'ROLE_USER' in roles and 'ROLE_ADMIN' not in roles and 'ROLE_OWNER' not in roles %}#}
{#        {% set isAdmin = 'ROLE_ADMIN' in roles and 'ROLE_OWNER' not in roles %}#}
{#        {% set isOwner = 'ROLE_OWNER' in roles %}#}

{#        {% set roleClass = isUser ? 'user' : (isAdmin ? 'admin' : 'owner') %}#}
{#        {% set roleText = isUser ? 'User' : (isAdmin ? 'Admin' : 'Owner') %}#}

{#        <div class="row">#}
{#            <!-- Left Column: Role Image -->#}
{#            <div class="col-lg-3 col-md-4 col-sm-12">#}
{#                <div class="role-image-container">#}
{#                    <div class="role-image-frame">#}
{#                        <img src="{{ '/images/' ~ roleClass ~ '.jpg' }}"#}
{#                             alt="{{ roleText }} Profile"#}
{#                             class="role-image">#}
{#                        <div class="role-badge {{ roleClass }}">{{ roleText }}</div>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}

{#            <!-- Right Column: Profile Content -->#}
{#            <div class="col-lg-9 col-md-8 col-sm-12">#}
{#                <!-- Profile Header Card -->#}
{#                <div class="profile-card">#}
{#                    <div class="profile-header {{ roleClass }}">#}
{#                        <h1 class="profile-title">#}
{#                            <i class="fas fa-user-tie"></i>#}
{#                            {{ userDetails.firstName }} {{ userDetails.lastName }}#}
{#                        </h1>#}
{#                        <p class="profile-subtitle">SoundScape Hub Professional Dashboard</p>#}
{#                    </div>#}

{#                    <!-- Profile Information -->#}
{#                    <div class="row g-4 p-4">#}
{#                        <div class="col-md-6">#}
{#                            <div class="info-card">#}
{#                                <h5 class="info-card-title">#}
{#                                    <i class="fas fa-chart-line text-primary"></i>#}
{#                                    Account Overview#}
{#                                </h5>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Email Address:</span>#}
{#                                    <span class="info-value">{{ user.email }}</span>#}
{#                                </div>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Reviews Created:</span>#}
{#                                    <span class="info-value">{{ user.editionReviews|length }}</span>#}
{#                                </div>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Total Purchases:</span>#}
{#                                    <span class="info-value">{{ user.purchases|length }}</span>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}

{#                        <div class="col-md-6">#}
{#                            <div class="info-card">#}
{#                                <h5 class="info-card-title">#}
{#                                    <i class="fas fa-id-card text-success"></i>#}
{#                                    Personal Information#}
{#                                </h5>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Age:</span>#}
{#                                    <span class="info-value">{{ userDetails.age }} years</span>#}
{#                                </div>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Phone Number:</span>#}
{#                                    <span class="info-value">{{ userDetails.phoneNo ?? 'Not provided' }}</span>#}
{#                                </div>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Member Since:</span>#}
{#                                    <span class="info-value">{{ userDetails.createdAt|date('F j, Y') }}</span>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}

{#                <!-- Action Panel -->#}
{#                <div class="action-panel">#}
{#                    <h3 class="action-title">#}
{#                        <i class="fas fa-tools me-2"></i>#}
{#                        {% if isUser %}Available Actions{% elseif isAdmin %}Administrative Panel{% else %}Owner Management Console{% endif %}#}
{#                    </h3>#}

{#                    {% if isUser %}#}
{#                        <!-- USER INTERFACE -->#}
{#                        <div class="row">#}
{#                            <div class="col-lg-6 col-md-12 mb-3">#}
{#                                #}{# CONTROLLER: This should route to your home page controller method #}
{#                                <a href="{{ path('app_home_page') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-home"></i>#}
{#                                    <span>Dashboard Home</span>#}
{#                                </a>#}
{#                            </div>#}
{#                            <div class="col-lg-6 col-md-12 mb-3">#}
{#                                #}{# CONTROLLER: This should route to festival index controller method - e.g., FestivalController::index() #}
{#                                <a href="{{ path('festival_index') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-calendar-alt"></i>#}
{#                                    <span>Browse Festivals</span>#}
{#                                </a>#}
{#                            </div>#}
{#                            <div class="col-lg-6 col-md-12 mb-3">#}
{#                                #}{# CONTROLLER: This should route to artist index controller method - e.g., ArtistController::index() #}
{#                                <a href="{{ path('artist_index') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-microphone-alt"></i>#}
{#                                    <span>Browse Artists</span>#}
{#                                </a>#}
{#                            </div>#}
{#                            <div class="col-lg-6 col-md-12 mb-3">#}
{#                                #}{# CONTROLLER: This should route to amenity index controller method - e.g., AmenityController::index() #}
{#                                <a href="{{ path('amenity_index') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-concierge-bell"></i>#}
{#                                    <span>Browse Amenities</span>#}
{#                                </a>#}
{#                            </div>#}

{#                            #}{# FUTURE USER ACTIONS: Uncomment and implement these routes in your controllers as needed#}
{#                            <div class="col-lg-6 col-md-12 mb-3">#}
{#                                <a href="{{ path('user_purchases') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-shopping-bag"></i>#}
{#                                    <span>My Purchases</span>#}
{#                                </a>#}
{#                            </div>#}
{#                            <div class="col-lg-6 col-md-12 mb-3">#}
{#                                <a href="{{ path('user_reviews') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-star"></i>#}
{#                                    <span>My Reviews</span>#}
{#                                </a>#}
{#                            </div>#}
{#                            #}
{#                        </div>#}

{#                    {% else %}#}
{#                        <!-- ADMIN/OWNER INTERFACE -->#}
{#                        #}{# NOTE: Owner interface is identical to Admin for now, but can be easily extended by checking isOwner condition #}

{#                        <!-- Festival Management -->#}
{#                        <div class="mb-4">#}
{#                            <button class="category-btn" onclick="toggleCategory('festival')">#}
{#                                <span><i class="fas fa-calendar-alt me-2"></i> Festival Management</span>#}
{#                                <i class="fas fa-chevron-down"></i>#}
{#                            </button>#}
{#                            <div id="festival-actions" class="action-group">#}
{#                                <div class="action-buttons-row">#}
{#                                    #}{# CONTROLLER: Direct route to festival index - FestivalController::index() #}
{#                                    <button class="action-sub-btn list-btn" onclick="directAction('festival_index')">#}
{#                                        <i class="fas fa-list me-1"></i> List All#}
{#                                    </button>#}
{#                                    #}{# CONTROLLER: Route to festival new form - FestivalController::new() #}
{#                                    <button class="action-sub-btn" onclick="directAction('festival_new')">#}
{#                                        <i class="fas fa-plus me-1"></i> Create New#}
{#                                    </button>#}
{#                                    #}{# CONTROLLER: These will use search functionality to find festival, then route to respective methods #}
{#                                    <button class="action-sub-btn edit-btn" onclick="showSearchBox('festival', 'edit')">#}
{#                                        <i class="fas fa-edit me-1"></i> Edit#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn delete-btn" onclick="showSearchBox('festival', 'delete')">#}
{#                                        <i class="fas fa-trash me-1"></i> Delete#}
{#                                    </button>#}
{#                                </div>#}
{#                                <div id="festival-search" class="search-box">#}
{#                                    <div class="row align-items-end">#}
{#                                        <div class="col-md-6 mb-2">#}
{#                                            <label class="form-label fw-bold">Search Festival:</label>#}
{#                                            <input type="text" class="form-control search-input" id="festival-input" placeholder="Enter festival name or ID">#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <label class="form-label fw-bold">Search Type:</label>#}
{#                                            <div class="d-flex gap-1">#}
{#                                                <button class="search-toggle active" onclick="toggleSearchType('festival', 'name')" id="festival-name-toggle">Name</button>#}
{#                                                <button class="search-toggle" onclick="toggleSearchType('festival', 'id')" id="festival-id-toggle">ID</button>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <button class="execute-btn w-100" onclick="executeAction('festival')">#}
{#                                                <i class="fas fa-search me-1"></i> Execute#}
{#                                            </button>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}

{#                        <!-- Artist Management -->#}
{#                        <div class="mb-4">#}
{#                            <button class="category-btn" onclick="toggleCategory('artist')">#}
{#                                <span><i class="fas fa-microphone-alt me-2"></i> Artist Management</span>#}
{#                                <i class="fas fa-chevron-down"></i>#}
{#                            </button>#}
{#                            <div id="artist-actions" class="action-group">#}
{#                                <div class="action-buttons-row">#}
{#                                    #}{# CONTROLLER: Direct route to artist index - ArtistController::index() #}
{#                                    <button class="action-sub-btn list-btn" onclick="directAction('artist_index')">#}
{#                                        <i class="fas fa-list me-1"></i> List All#}
{#                                    </button>#}
{#                                    #}{# CONTROLLER: Route to artist new form - ArtistController::new() #}
{#                                    <button class="action-sub-btn" onclick="directAction('artist_new')">#}
{#                                        <i class="fas fa-plus me-1"></i> Create New#}
{#                                    </button>#}
{#                                    #}{# CONTROLLER: These will use search functionality to find artist, then route to respective methods #}
{#                                    <button class="action-sub-btn edit-btn" onclick="showSearchBox('artist', 'edit')">#}
{#                                        <i class="fas fa-edit me-1"></i> Edit#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn delete-btn" onclick="showSearchBox('artist', 'delete')">#}
{#                                        <i class="fas fa-trash me-1"></i> Delete#}
{#                                    </button>#}
{#                                </div>#}
{#                                <div id="artist-search" class="search-box">#}
{#                                    <div class="row align-items-end">#}
{#                                        <div class="col-md-6 mb-2">#}
{#                                            <label class="form-label fw-bold">Search Artist:</label>#}
{#                                            <input type="text" class="form-control search-input" id="artist-input" placeholder="Enter artist name or ID">#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <label class="form-label fw-bold">Search Type:</label>#}
{#                                            <div class="d-flex gap-1">#}
{#                                                <button class="search-toggle active" onclick="toggleSearchType('artist', 'name')" id="artist-name-toggle">Name</button>#}
{#                                                <button class="search-toggle" onclick="toggleSearchType('artist', 'id')" id="artist-id-toggle">ID</button>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <button class="execute-btn w-100" onclick="executeAction('artist')">#}
{#                                                <i class="fas fa-search me-1"></i> Execute#}
{#                                            </button>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}

{#                        <!-- Amenity Management -->#}
{#                        <div class="mb-4">#}
{#                            <button class="category-btn" onclick="toggleCategory('amenity')">#}
{#                                <span><i class="fas fa-concierge-bell me-2"></i> Amenity Management</span>#}
{#                                <i class="fas fa-chevron-down"></i>#}
{#                            </button>#}
{#                            <div id="amenity-actions" class="action-group">#}
{#                                <div class="action-buttons-row">#}
{#                                    #}{# CONTROLLER: Direct route to amenity index - AmenityController::index() #}
{#                                    <button class="action-sub-btn list-btn" onclick="directAction('amenity_index')">#}
{#                                        <i class="fas fa-list me-1"></i> List All#}
{#                                    </button>#}
{#                                    #}{# CONTROLLER: Route to amenity new form - AmenityController::new() #}
{#                                    <button class="action-sub-btn" onclick="directAction('amenity_new')">#}
{#                                        <i class="fas fa-plus me-1"></i> Create New#}
{#                                    </button>#}
{#                                    #}{# CONTROLLER: These will use search functionality to find amenity, then route to respective methods #}
{#                                    <button class="action-sub-btn edit-btn" onclick="showSearchBox('amenity', 'edit')">#}
{#                                        <i class="fas fa-edit me-1"></i> Edit#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn delete-btn" onclick="showSearchBox('amenity', 'delete')">#}
{#                                        <i class="fas fa-trash me-1"></i> Delete#}
{#                                    </button>#}
{#                                </div>#}
{#                                <div id="amenity-search" class="search-box">#}
{#                                    <div class="row align-items-end">#}
{#                                        <div class="col-md-6 mb-2">#}
{#                                            <label class="form-label fw-bold">Search Amenity:</label>#}
{#                                            <input type="text" class="form-control search-input" id="amenity-input" placeholder="Enter amenity name or ID">#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <label class="form-label fw-bold">Search Type:</label>#}
{#                                            <div class="d-flex gap-1">#}
{#                                                <button class="search-toggle active" onclick="toggleSearchType('amenity', 'name')" id="amenity-name-toggle">Name</button>#}
{#                                                <button class="search-toggle" onclick="toggleSearchType('amenity', 'id')" id="amenity-id-toggle">ID</button>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <button class="execute-btn w-100" onclick="executeAction('amenity')">#}
{#                                                <i class="fas fa-search me-1"></i> Execute#}
{#                                            </button>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}

{#                        #}{# FUTURE ENTITIES: Add new entity management sections here following the same pattern#}

{#                        <!-- Example: Purchase Management (Owner only) -->#}
{#                        {% if isOwner %}#}
{#                        <div class="mb-4">#}
{#                            <button class="category-btn" onclick="toggleCategory('purchase')">#}
{#                                <span><i class="fas fa-shopping-cart me-2"></i> Purchase Management</span>#}
{#                                <i class="fas fa-chevron-down"></i>#}
{#                            </button>#}
{#                            <div id="purchase-actions" class="action-group">#}
{#                                <!-- Purchase management actions would go here -->#}
{#                            </div>#}
{#                        </div>#}
{#                        {% endif %}#}

{#                        #}

{#                    {% endif %}#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}

{#    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>#}
{#    <script>#}
{#        let currentAction = '';#}
{#        let currentEntity = '';#}
{#        let searchType = 'name';#}

{#        function toggleCategory(entity) {#}
{#            const actionGroup = document.getElementById(entity + '-actions');#}
{#            const isVisible = actionGroup.classList.contains('show');#}

{#            // Hide all action groups#}
{#            document.querySelectorAll('.action-group').forEach(group => {#}
{#                group.classList.remove('show');#}
{#            });#}

{#            // Hide all search boxes#}
{#            document.querySelectorAll('.search-box').forEach(box => {#}
{#                box.classList.remove('show');#}
{#            });#}

{#            // Reset all category buttons#}
{#            document.querySelectorAll('.category-btn').forEach(btn => {#}
{#                btn.classList.remove('active');#}
{#            });#}

{#            // Show/hide current action group#}
{#            if (!isVisible) {#}
{#                actionGroup.classList.add('show');#}
{#                event.target.closest('.category-btn').classList.add('active');#}
{#            }#}
{#        }#}

{#        function directAction(route) {#}
{#            // CONTROLLER: This function handles direct navigation to list/new actions#}
{#            // Make sure these routes exist in your routing configuration#}
{#            window.location.href = "{{ path('app_home_page') }}".replace('app_home_page', route);#}
{#        }#}

{#        function showSearchBox(entity, action) {#}
{#            currentEntity = entity;#}
{#            currentAction = action;#}

{#            // Hide all search boxes first#}
{#            document.querySelectorAll('.search-box').forEach(box => {#}
{#                box.classList.remove('show');#}
{#            });#}

{#            // Show current search box#}
{#            const searchBox = document.getElementById(entity + '-search');#}
{#            searchBox.classList.add('show');#}

{#            // Focus on input#}
{#            document.getElementById(entity + '-input').focus();#}
{#        }#}

{#        function toggleSearchType(entity, type) {#}
{#            searchType = type;#}

{#            // Update toggle buttons#}
{#            document.getElementById(entity + '-name-toggle').classList.toggle('active', type === 'name');#}
{#            document.getElementById(entity + '-id-toggle').classList.toggle('active', type === 'id');#}
{#        }#}

{#        function executeAction(entity) {#}
{#            const input = document.getElementById(entity + '-input').value.trim();#}

{#            if (!input) {#}
{#                alert('Please enter a search term');#}
{#                return;#}
{#            }#}

{#            // CONTROLLER: This function calls the search endpoint#}
{#            // You need to implement these search routes in your controllers:#}
{#            // - festival_search, artist_search, amenity_search#}
{#            // Each should accept POST requests with JSON: {query: string, type: 'name'|'id'}#}
{#            // And return JSON: {success: boolean, id?: number, message?: string}#}

{#            fetch("{{ path('app_home_page') }}".replace('app_home_page', entity + '_search'), {#}
{#                method: 'POST',#}
{#                headers: {#}
{#                    'Content-Type': 'application/json',#}
{#                    'X-Requested-With': 'XMLHttpRequest'#}
{#                },#}
{#                body: JSON.stringify({#}
{#                    query: input,#}
{#                    type: searchType#}
{#                })#}
{#            })#}
{#                .then(response => response.json())#}
{#                .then(data => {#}
{#                    if (data.success && data.id) {#}
{#                        // CONTROLLER: Redirect to the appropriate action with the found ID#}
{#                        // Routes should be: {entity}_edit, {entity}_delete#}
{#                        // These should accept an 'id' parameter#}
{#                        let route = entity + '_' + currentAction;#}
{#                        let url = "{{ path('app_home_page') }}".replace('app_home_page', route);#}

{#                        // For edit and delete actions, append the ID to the URL#}
{#                        if (currentAction === 'edit' || currentAction === 'delete') {#}
{#                            url = url.replace(/\/\d+$/, '') + '/' + data.id;#}
{#                        }#}

{#                        window.location.href = url;#}
{#                    } else {#}
{#                        alert(data.message || 'Entity not found');#}
{#                    }#}
{#                })#}
{#                .catch(error => {#}
{#                    console.error('Error:', error);#}
{#                    alert('An error occurred while searching');#}
{#                });#}
{#        }#}

{#        // Enter key support for search inputs#}
{#        document.addEventListener('DOMContentLoaded', function() {#}
{#            document.querySelectorAll('.search-input').forEach(input => {#}
{#                input.addEventListener('keypress', function(e) {#}
{#                    if (e.key === 'Enter') {#}
{#                        const entity = this.id.split('-')[0];#}
{#                        executeAction(entity);#}
{#                    }#}
{#                });#}
{#            });#}
{#        });#}
{#    </script>#}
{#{% endblock %}#}


{#{% extends 'base.html.twig' %}#}

{#{% block title %}SoundScape Hub - Profile{% endblock %}#}

{#{% block stylesheets %}#}
{#    {{ parent() }}#}
{#    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">#}
{#    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">#}
{#    <style>#}
{#        :root #}{#}#}
{#            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);#}
{#            --user-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);#}
{#            --admin-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);#}
{#            --owner-gradient: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);#}
{#            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);#}
{#            --hover-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);#}
{#        }#}

{#        body #}{#}#}
{#            background: var(--primary-gradient);#}
{#            min-height: 100vh;#}
{#            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;#}
{#        }#}

{#        .profile-container #}{#}#}
{#            padding: 40px 0;#}
{#        }#}

{#        /* Role Icon Styling */#}
{#        .role-icon-container #}{#}#}
{#            position: relative;#}
{#            margin-bottom: 30px;#}
{#        }#}

{#        .role-icon #}{#}#}
{#            width: 120px;#}
{#            height: 120px;#}
{#            border-radius: 50%;#}
{#            border: 4px solid white;#}
{#            box-shadow: var(--card-shadow);#}
{#            object-fit: cover;#}
{#            transition: all 0.3s ease;#}
{#        }#}

{#        .role-icon:hover #}{#}#}
{#            transform: scale(1.05);#}
{#            box-shadow: var(--hover-shadow);#}
{#        }#}

{#        .role-badge #}{#}#}
{#            position: absolute;#}
{#            bottom: -10px;#}
{#            right: -10px;#}
{#            padding: 8px 16px;#}
{#            border-radius: 20px;#}
{#            font-size: 0.8rem;#}
{#            font-weight: 600;#}
{#            color: white;#}
{#            border: 3px solid white;#}
{#        }#}

{#        .role-badge.user { background: var(--user-gradient); }#}
{#        .role-badge.admin { background: var(--admin-gradient); }#}
{#        .role-badge.owner { background: var(--owner-gradient); }#}

{#        /* Profile Card Styling */#}
{#        .profile-card #}{#}#}
{#            background: rgba(255, 255, 255, 0.95);#}
{#            border-radius: 20px;#}
{#            box-shadow: var(--card-shadow);#}
{#            border: none;#}
{#            overflow: hidden;#}
{#            transition: all 0.3s ease;#}
{#        }#}

{#        .profile-card:hover #}{#}#}
{#            box-shadow: var(--hover-shadow);#}
{#        }#}

{#        .profile-header #}{#}#}
{#            padding: 30px;#}
{#            color: white;#}
{#            position: relative;#}
{#        }#}

{#        .profile-header.user { background: var(--user-gradient); }#}
{#        .profile-header.admin { background: var(--admin-gradient); }#}
{#        .profile-header.owner { background: var(--owner-gradient); }#}

{#        .profile-title #}{#}#}
{#            font-size: 2rem;#}
{#            font-weight: 700;#}
{#            margin-bottom: 10px;#}
{#        }#}

{#        .profile-subtitle #}{#}#}
{#            opacity: 0.9;#}
{#            font-size: 1.1rem;#}
{#        }#}

{#        /* Info Cards */#}
{#        .info-card #}{#}#}
{#            background: white;#}
{#            border-radius: 15px;#}
{#            padding: 25px;#}
{#            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);#}
{#            border: none;#}
{#            height: 100%;#}
{#            transition: all 0.3s ease;#}
{#        }#}

{#        .info-card:hover #}{#}#}
{#            transform: translateY(-5px);#}
{#            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);#}
{#        }#}

{#        .info-card h5 #}{#}#}
{#            color: #2c3e50;#}
{#            font-weight: 600;#}
{#            margin-bottom: 20px;#}
{#            display: flex;#}
{#            align-items: center;#}
{#            gap: 10px;#}
{#        }#}

{#        .info-item #}{#}#}
{#            display: flex;#}
{#            justify-content: space-between;#}
{#            align-items: center;#}
{#            padding: 12px 0;#}
{#            border-bottom: 1px solid #f8f9fa;#}
{#        }#}

{#        .info-item:last-child #}{#}#}
{#            border-bottom: none;#}
{#        }#}

{#        .info-label #}{#}#}
{#            font-weight: 600;#}
{#            color: #495057;#}
{#        }#}

{#        .info-value #}{#}#}
{#            color: #6c757d;#}
{#            font-weight: 500;#}
{#        }#}

{#        /* Action Panel */#}
{#        .action-panel #}{#}#}
{#            background: rgba(255, 255, 255, 0.95);#}
{#            border-radius: 20px;#}
{#            padding: 30px;#}
{#            box-shadow: var(--card-shadow);#}
{#            margin-top: 30px;#}
{#        }#}

{#        .action-title #}{#}#}
{#            font-size: 1.5rem;#}
{#            font-weight: 700;#}
{#            color: #2c3e50;#}
{#            margin-bottom: 25px;#}
{#            text-align: center;#}
{#        }#}

{#        /* User Action Buttons */#}
{#        .user-action-btn #}{#}#}
{#            background: var(--user-gradient);#}
{#            border: none;#}
{#            color: white;#}
{#            padding: 15px 25px;#}
{#            border-radius: 12px;#}
{#            font-weight: 600;#}
{#            text-decoration: none;#}
{#            display: flex;#}
{#            align-items: center;#}
{#            gap: 10px;#}
{#            margin-bottom: 15px;#}
{#            transition: all 0.3s ease;#}
{#            width: 100%;#}
{#            justify-content: center;#}
{#        }#}

{#        .user-action-btn:hover #}{#}#}
{#            transform: translateY(-2px);#}
{#            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.3);#}
{#            color: white;#}
{#            text-decoration: none;#}
{#        }#}

{#        /* Admin/Owner Action Buttons */#}
{#        .category-btn #}{#}#}
{#            background: white;#}
{#            border: 2px solid #e9ecef;#}
{#            color: #495057;#}
{#            padding: 15px 25px;#}
{#            border-radius: 12px;#}
{#            font-weight: 600;#}
{#            margin-bottom: 15px;#}
{#            transition: all 0.3s ease;#}
{#            width: 100%;#}
{#            display: flex;#}
{#            align-items: center;#}
{#            justify-content: space-between;#}
{#        }#}

{#        .category-btn:hover, .category-btn:focus #}{#}#}
{#            border-color: #667eea;#}
{#            color: #667eea;#}
{#            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);#}
{#        }#}

{#        .category-btn.active #}{#}#}
{#            background: var(--admin-gradient);#}
{#            border-color: transparent;#}
{#            color: white;#}
{#        }#}

{#        .action-group #}{#}#}
{#            background: #f8f9fa;#}
{#            border-radius: 12px;#}
{#            padding: 20px;#}
{#            margin-top: 15px;#}
{#            display: none;#}
{#        }#}

{#        .action-group.show #}{#}#}
{#            display: block;#}
{#            animation: slideDown 0.3s ease;#}
{#        }#}

{#        @keyframes slideDown #}{#}#}
{#            from { opacity: 0; transform: translateY(-10px); }#}
{#            to { opacity: 1; transform: translateY(0); }#}
{#        }#}

{#        .action-sub-btn #}{#}#}
{#            background: linear-gradient(45deg, #667eea, #764ba2);#}
{#            border: none;#}
{#            color: white;#}
{#            padding: 12px 20px;#}
{#            border-radius: 8px;#}
{#            font-weight: 500;#}
{#            margin: 5px;#}
{#            transition: all 0.3s ease;#}
{#            flex: 1;#}
{#        }#}

{#        .action-sub-btn:hover #}{#}#}
{#            transform: translateY(-2px);#}
{#            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);#}
{#            color: white;#}
{#        }#}

{#        /* Search Box */#}
{#        .search-box #}{#}#}
{#            background: white;#}
{#            border-radius: 12px;#}
{#            padding: 20px;#}
{#            margin-top: 15px;#}
{#            border: 2px solid #e9ecef;#}
{#            display: none;#}
{#        }#}

{#        .search-box.show #}{#}#}
{#            display: block;#}
{#            animation: slideDown 0.3s ease;#}
{#        }#}

{#        .search-input #}{#}#}
{#            border: 2px solid #e9ecef;#}
{#            border-radius: 8px;#}
{#            padding: 12px 15px;#}
{#            font-size: 1rem;#}
{#            transition: all 0.3s ease;#}
{#        }#}

{#        .search-input:focus #}{#}#}
{#            border-color: #667eea;#}
{#            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);#}
{#        }#}

{#        .search-toggle #}{#}#}
{#            background: #f8f9fa;#}
{#            border: 2px solid #e9ecef;#}
{#            border-radius: 8px;#}
{#            padding: 8px 15px;#}
{#            font-size: 0.9rem;#}
{#            cursor: pointer;#}
{#            transition: all 0.3s ease;#}
{#        }#}

{#        .search-toggle.active #}{#}#}
{#            background: var(--admin-gradient);#}
{#            border-color: transparent;#}
{#            color: white;#}
{#        }#}

{#        .execute-btn #}{#}#}
{#            background: linear-gradient(45deg, #28a745, #20c997);#}
{#            border: none;#}
{#            color: white;#}
{#            padding: 12px 30px;#}
{#            border-radius: 8px;#}
{#            font-weight: 600;#}
{#            transition: all 0.3s ease;#}
{#        }#}

{#        .execute-btn:hover #}{#}#}
{#            transform: translateY(-2px);#}
{#            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);#}
{#            color: white;#}
{#        }#}

{#        /* Responsive Design */#}
{#        @media (max-width: 768px) #}{#}#}
{#            .profile-container #}{#}#}
{#                padding: 20px 0;#}
{#            }#}

{#            .profile-title #}{#}#}
{#                font-size: 1.5rem;#}
{#            }#}

{#            .role-icon #}{#}#}
{#                width: 100px;#}
{#                height: 100px;#}
{#            }#}

{#            .action-sub-btn #}{#}#}
{#                margin: 5px 0;#}
{#                flex: none;#}
{#                width: 100%;#}
{#            }#}
{#        }#}
{#    </style>#}
{#{% endblock %}#}

{#{% block body %}#}
{#    <div class="container profile-container">#}
{#        {% set roles = user.getRoles() %}#}
{#        {% set isUser = 'ROLE_USER' in roles and 'ROLE_ADMIN' not in roles and 'ROLE_OWNER' not in roles %}#}
{#        {% set isAdmin = 'ROLE_ADMIN' in roles and 'ROLE_OWNER' not in roles %}#}
{#        {% set isOwner = 'ROLE_OWNER' in roles %}#}

{#        {% set roleClass = isUser ? 'user' : (isAdmin ? 'admin' : 'owner') %}#}
{#        {% set roleText = isUser ? 'User' : (isAdmin ? 'Admin' : 'Owner') %}#}

{#        <div class="row">#}
{#            <!-- Left Column: Role Icon -->#}
{#            <div class="col-lg-2 col-md-3 col-sm-12">#}
{#                <div class="role-icon-container text-center">#}
{#                    <img src="{{ '/images/' ~ roleClass ~ '.jpg' }}"#}
{#                         alt="{{ roleText }} Icon"#}
{#                         class="role-icon">#}
{#                    <span class="role-badge {{ roleClass }}">{{ roleText }}</span>#}
{#                </div>#}
{#            </div>#}

{#            <!-- Right Column: Profile Content -->#}
{#            <div class="col-lg-10 col-md-9 col-sm-12">#}
{#                <!-- Profile Header Card -->#}
{#                <div class="profile-card">#}
{#                    <div class="profile-header {{ roleClass }}">#}
{#                        <h1 class="profile-title">#}
{#                            <i class="fas fa-user-circle me-2"></i>#}
{#                            {{ userDetails.firstName }} {{ userDetails.lastName }}#}
{#                        </h1>#}
{#                        <p class="profile-subtitle">Welcome to your SoundScape Hub profile</p>#}
{#                    </div>#}

{#                    <!-- Profile Information -->#}
{#                    <div class="row g-4 p-4">#}
{#                        <div class="col-md-6">#}
{#                            <div class="info-card">#}
{#                                <h5><i class="fas fa-info-circle text-primary"></i> Account Overview</h5>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Email:</span>#}
{#                                    <span class="info-value">{{ user.email }}</span>#}
{#                                </div>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Reviews Created:</span>#}
{#                                    <span class="info-value">{{ user.editionReviews|length }}</span>#}
{#                                </div>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Purchases:</span>#}
{#                                    <span class="info-value">{{ user.purchases|length }}</span>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}

{#                        <div class="col-md-6">#}
{#                            <div class="info-card">#}
{#                                <h5><i class="fas fa-user text-success"></i> Personal Details</h5>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Age:</span>#}
{#                                    <span class="info-value">{{ userDetails.age }}</span>#}
{#                                </div>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Phone:</span>#}
{#                                    <span class="info-value">{{ userDetails.phoneNo ?? 'Not provided' }}</span>#}
{#                                </div>#}
{#                                <div class="info-item">#}
{#                                    <span class="info-label">Member Since:</span>#}
{#                                    <span class="info-value">{{ userDetails.createdAt|date('M d, Y') }}</span>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}

{#                <!-- Action Panel -->#}
{#                <div class="action-panel">#}
{#                    <h3 class="action-title">#}
{#                        <i class="fas fa-cogs me-2"></i>#}
{#                        {% if isUser %}User Actions{% elseif isAdmin %}Admin Panel{% else %}Owner Dashboard{% endif %}#}
{#                    </h3>#}

{#                    {% if isUser %}#}
{#                        <!-- USER INTERFACE -->#}
{#                        <div class="row">#}
{#                            <div class="col-md-6 col-lg-4 mb-3">#}
{#                                <a href="{{ path('app_home_page') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-home"></i> Home Page#}
{#                                </a>#}
{#                            </div>#}
{#                            <div class="col-md-6 col-lg-4 mb-3">#}
{#                                <a href="{{ path('festival_index') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-music"></i> View Festivals#}
{#                                </a>#}
{#                            </div>#}
{#                            <div class="col-md-6 col-lg-4 mb-3">#}
{#                                <a href="{{ path('artist_index') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-microphone"></i> View Artists#}
{#                                </a>#}
{#                            </div>#}
{#                            <div class="col-md-6 col-lg-4 mb-3">#}
{#                                <a href="{{ path('amenity_index') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-star"></i> View Amenities#}
{#                                </a>#}
{#                            </div>#}
{#                            <!-- Future user actions can be added here -->#}
{#                            #}{##}{##}
{#                            <div class="col-md-6 col-lg-4 mb-3">#}
{#                                <a href="{{ path('purchase_show') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-shopping-cart"></i> My Purchases#}
{#                                </a>#}
{#                            </div>#}
{#                            <div class="col-md-6 col-lg-4 mb-3">#}
{#                                <a href="{{ path('review_show') }}" class="user-action-btn">#}
{#                                    <i class="fas fa-star"></i> My Reviews#}
{#                                </a>#}
{#                            </div>#}
{#                            #}
{#                        </div>#}

{#                    {% else %}#}
{#                        <!-- ADMIN/OWNER INTERFACE -->#}
{#                        <!-- Note: Owner interface is identical to Admin for now, but can be easily extended -->#}

{#                        <!-- Festival Management -->#}
{#                        <div class="mb-4">#}
{#                            <button class="category-btn" onclick="toggleCategory('festival')">#}
{#                                <span><i class="fas fa-music me-2"></i> Festival Management</span>#}
{#                                <i class="fas fa-chevron-down"></i>#}
{#                            </button>#}
{#                            <div id="festival-actions" class="action-group">#}
{#                                <div class="d-flex flex-wrap gap-2 mb-3">#}
{#                                    <button class="action-sub-btn" onclick="directAction('festival_index')">#}
{#                                        <i class="fas fa-list me-1"></i> List All#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('festival', 'new')">#}
{#                                        <i class="fas fa-plus me-1"></i> New#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('festival', 'edit')">#}
{#                                        <i class="fas fa-edit me-1"></i> Edit#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('festival', 'delete')">#}
{#                                        <i class="fas fa-trash me-1"></i> Delete#}
{#                                    </button>#}
{#                                </div>#}
{#                                <div id="festival-search" class="search-box">#}
{#                                    <div class="row align-items-end">#}
{#                                        <div class="col-md-6 mb-2">#}
{#                                            <label class="form-label">Search Festival:</label>#}
{#                                            <input type="text" class="form-control search-input" id="festival-input" placeholder="Enter festival name or ID">#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <label class="form-label">Search by:</label>#}
{#                                            <div class="d-flex gap-1">#}
{#                                                <button class="search-toggle active" onclick="toggleSearchType('festival', 'name')" id="festival-name-toggle">Name</button>#}
{#                                                <button class="search-toggle" onclick="toggleSearchType('festival', 'id')" id="festival-id-toggle">ID</button>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <button class="execute-btn w-100" onclick="executeAction('festival')">#}
{#                                                <i class="fas fa-search me-1"></i> Execute#}
{#                                            </button>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}

{#                        <!-- Artist Management -->#}
{#                        <div class="mb-4">#}
{#                            <button class="category-btn" onclick="toggleCategory('artist')">#}
{#                                <span><i class="fas fa-microphone me-2"></i> Artist Management</span>#}
{#                                <i class="fas fa-chevron-down"></i>#}
{#                            </button>#}
{#                            <div id="artist-actions" class="action-group">#}
{#                                <div class="d-flex flex-wrap gap-2 mb-3">#}
{#                                    <button class="action-sub-btn" onclick="directAction('artist_index')">#}
{#                                        <i class="fas fa-list me-1"></i> List All#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('artist', 'new')">#}
{#                                        <i class="fas fa-plus me-1"></i> New#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('artist', 'edit')">#}
{#                                        <i class="fas fa-edit me-1"></i> Edit#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('artist', 'delete')">#}
{#                                        <i class="fas fa-trash me-1"></i> Delete#}
{#                                    </button>#}
{#                                </div>#}
{#                                <div id="artist-search" class="search-box">#}
{#                                    <div class="row align-items-end">#}
{#                                        <div class="col-md-6 mb-2">#}
{#                                            <label class="form-label">Search Artist:</label>#}
{#                                            <input type="text" class="form-control search-input" id="artist-input" placeholder="Enter artist name or ID">#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <label class="form-label">Search by:</label>#}
{#                                            <div class="d-flex gap-1">#}
{#                                                <button class="search-toggle active" onclick="toggleSearchType('artist', 'name')" id="artist-name-toggle">Name</button>#}
{#                                                <button class="search-toggle" onclick="toggleSearchType('artist', 'id')" id="artist-id-toggle">ID</button>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <button class="execute-btn w-100" onclick="executeAction('artist')">#}
{#                                                <i class="fas fa-search me-1"></i> Execute#}
{#                                            </button>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}

{#                        <!-- Amenity Management -->#}
{#                        <div class="mb-4">#}
{#                            <button class="category-btn" onclick="toggleCategory('amenity')">#}
{#                                <span><i class="fas fa-star me-2"></i> Amenity Management</span>#}
{#                                <i class="fas fa-chevron-down"></i>#}
{#                            </button>#}
{#                            <div id="amenity-actions" class="action-group">#}
{#                                <div class="d-flex flex-wrap gap-2 mb-3">#}
{#                                    <button class="action-sub-btn" onclick="directAction('amenity_index')">#}
{#                                        <i class="fas fa-list me-1"></i> List All#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('amenity', 'new')">#}
{#                                        <i class="fas fa-plus me-1"></i> New#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('amenity', 'edit')">#}
{#                                        <i class="fas fa-edit me-1"></i> Edit#}
{#                                    </button>#}
{#                                    <button class="action-sub-btn" onclick="showSearchBox('amenity', 'delete')">#}
{#                                        <i class="fas fa-trash me-1"></i> Delete#}
{#                                    </button>#}
{#                                </div>#}
{#                                <div id="amenity-search" class="search-box">#}
{#                                    <div class="row align-items-end">#}
{#                                        <div class="col-md-6 mb-2">#}
{#                                            <label class="form-label">Search Amenity:</label>#}
{#                                            <input type="text" class="form-control search-input" id="amenity-input" placeholder="Enter amenity name or ID">#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <label class="form-label">Search by:</label>#}
{#                                            <div class="d-flex gap-1">#}
{#                                                <button class="search-toggle active" onclick="toggleSearchType('amenity', 'name')" id="amenity-name-toggle">Name</button>#}
{#                                                <button class="search-toggle" onclick="toggleSearchType('amenity', 'id')" id="amenity-id-toggle">ID</button>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-md-3 mb-2">#}
{#                                            <button class="execute-btn w-100" onclick="executeAction('amenity')">#}
{#                                                <i class="fas fa-search me-1"></i> Execute#}
{#                                            </button>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                </div>#}
{#                            </div>#}
{#                        </div>#}

{#                        <!-- Future entities can be easily added here following the same pattern -->#}
{#                        #}{##}{##}
{#                        <!-- Purchase Management (Owner only example) -->#}
{#                        {% if isOwner %}#}
{#                        <div class="mb-4">#}
{#                            <button class="category-btn" onclick="toggleCategory('purchase')">#}
{#                                <span><i class="fas fa-shopping-cart me-2"></i> Purchase Management</span>#}
{#                                <i class="fas fa-chevron-down"></i>#}
{#                            </button>#}
{#                            <!-- Purchase actions would go here -->#}
{#                        </div>#}
{#                        {% endif %}#}
{#                        #}

{#                    {% endif %}#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}

{#    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>#}
{#    <script>#}
{#        let currentAction = '';#}
{#        let currentEntity = '';#}
{#        let searchType = 'name';#}

{#        function toggleCategory(entity) #}{#}#}
{#            const actionGroup = document.getElementById(entity + '-actions');#}
{#            const isVisible = actionGroup.classList.contains('show');#}

{#            // Hide all action groups#}
{#            document.querySelectorAll('.action-group').forEach(group => #}{#}#}
{#                group.classList.remove('show');#}
{#            });#}

{#            // Hide all search boxes#}
{#            document.querySelectorAll('.search-box').forEach(box => #}{#}#}
{#                box.classList.remove('show');#}
{#            });#}

{#            // Reset all category buttons#}
{#            document.querySelectorAll('.category-btn').forEach(btn => #}{#}#}
{#                btn.classList.remove('active');#}
{#            });#}

{#            // Show/hide current action group#}
{#            if (!isVisible) #}{#}#}
{#                actionGroup.classList.add('show');#}
{#                event.target.closest('.category-btn').classList.add('active');#}
{#            }#}
{#        }#}

{#        function directAction(route) #}{#}#}
{#            window.location.href = "{{ path('app_home_page') }}".replace('app_home_page', route);#}
{#        }#}

{#        function showSearchBox(entity, action) #}{#}#}
{#            currentEntity = entity;#}
{#            currentAction = action;#}

{#            // Hide all search boxes first#}
{#            document.querySelectorAll('.search-box').forEach(box => #}{#}#}
{#                box.classList.remove('show');#}
{#            });#}

{#            // Show current search box#}
{#            const searchBox = document.getElementById(entity + '-search');#}
{#            searchBox.classList.add('show');#}

{#            // Focus on input#}
{#            document.getElementById(entity + '-input').focus();#}
{#        }#}

{#        function toggleSearchType(entity, type) #}{#}#}
{#            searchType = type;#}

{#            // Update toggle buttons#}
{#            document.getElementById(entity + '-name-toggle').classList.toggle('active', type === 'name');#}
{#            document.getElementById(entity + '-id-toggle').classList.toggle('active', type === 'id');#}
{#        }#}

{#        function executeAction(entity) #}{#}#}
{#            const input = document.getElementById(entity + '-input').value.trim();#}

{#            if (!input) #}{#}#}
{#                alert('Please enter a search term');#}
{#                return;#}
{#            }#}

{#            // Call the search endpoint#}
{#            fetch("{{ path('app_home_page') }}".replace('app_home_page', entity + '_search'), #}{#}#}
{#                method: 'POST',#}
{#                headers: #}{#}#}
{#                    'Content-Type': 'application/json',#}
{#                    'X-Requested-With': 'XMLHttpRequest'#}
{#                },#}
{#                body: JSON.stringify(#}{#}#}
{#                    query: input,#}
{#                    type: searchType#}
{#                })#}
{#            })#}
{#                .then(response => response.json())#}
{#                .then(data => #}{#}#}
{#                    if (data.success && data.id) #}{#}#}
{#                        // Redirect to the appropriate action with the found ID#}
{#                        let route = entity + '_' + currentAction;#}
{#                        if (currentAction === 'new') #}{#}#}
{#                            route = entity + '_new';#}
{#                            window.location.href = "{{ path('app_home_page') }}".replace('app_home_page', route);#}
{#                        } else #}{#}#}
{#                            window.location.href = "{{ path('app_home_page') }}".replace('app_home_page', route).replace('1', data.id);#}
{#                        }#}
{#                    } else #}{#}#}
{#                        alert(data.message || 'Entity not found');#}
{#                    }#}
{#                })#}
{#                .catch(error => #}{#}#}
{#                    console.error('Error:', error);#}
{#                    alert('An error occurred while searching');#}
{#                });#}
{#        }#}

{#        // Enter key support for search inputs#}
{#        document.addEventListener('DOMContentLoaded', function() #}{#}#}
{#            document.querySelectorAll('.search-input').forEach(input => #}{#}#}
{#                input.addEventListener('keypress', function(e) #}{#}#}
{#                    if (e.key === 'Enter') #}{#}#}
{#                        const entity = this.id.split('-')[0];#}
{#                        executeAction(entity);#}
{#                    }#}
{#                });#}
{#            });#}
{#        });#}
{#    </script>#}
{#{% endblock %}#}

{#{% extends 'base.html.twig' %}#}

{#{% block title %}SoundScape Hub - Profile{% endblock %}#}

{#{% block body %}#}
{#    <div class="container mt-4" style="background-color: #f0f4f8; padding: 20px; border-radius: 10px;">#}
{#        {% set roles = user.getRoles() %}#}
{#        {% set isAdmin = 'ROLE_ADMIN' in roles %}#}

{#        <!-- Header with Framed Role Icon -->#}
{#        <div class="row mb-4">#}
{#            <div class="col-12 col-md-3">#}
{#                <div class="border border-dark rounded p-2 bg-light" style="border-width: 4px; width: 200px; height: 320px;">#}
{#                    <img src="{{ isAdmin ? '/images/admin.jpg' : '/images/user.jpg' }}"#}
{#                         alt="{{ isAdmin ? 'Admin' : 'User' }} Icon"#}
{#                         class="img-fluid w-100 h-100" style="object-fit: contain;">#}
{#                </div>#}
{#            </div>#}

{#            <!-- Main Profile Card -->#}
{#            <div class="col-12 col-md-9">#}
{#                <div class="card shadow-lg" style="border-color: #1e3a8a;">#}
{#                    <div class="card-header bg-primary text-white" style="background-color: #1e3a8a;">#}
{#                        <h2 class="mb-0">Account Profile</h2>#}
{#                    </div>#}
{#                    <div class="card-body" style="background-color: #ffffff;">#}
{#                        <h4 class="card-title">#}
{#                            {{ userDetails.firstName }} {{ userDetails.lastName }}#}
{#                            <span class="badge" style="background-color: #f97316; color: #ffffff;">{{ isAdmin ? 'Admin' : 'User' }}</span>#}
{#                        </h4>#}

{#                        <!-- User Account Details -->#}
{#                        <div class="row">#}
{#                            <div class="col-12 col-md-6">#}
{#                                <h5>Overview</h5>#}
{#                                <ul class="list-group list-group-flush">#}
{#                                    <li class="list-group-item"><strong>Email:</strong> {{ user.email }}</li>#}
{#                                    <li class="list-group-item"><strong>Created Reviews:</strong> {{ user.editionReviews|length }}</li>#}
{#                                    <li class="list-group-item"><strong>Purchases:</strong> {{ user.purchases|length }}</li>#}
{#                                </ul>#}
{#                            </div>#}
{#                        </div>#}

{#                        <!-- User Details -->#}
{#                        <div class="mt-3">#}
{#                            <h5>User Information</h5>#}
{#                            <ul class="list-group">#}
{#                                <li class="list-group-item"><strong>First Name:</strong> {{ userDetails.firstName }}</li>#}
{#                                <li class="list-group-item"><strong>Last Name:</strong> {{ userDetails.lastName }}</li>#}
{#                                <li class="list-group-item"><strong>Age:</strong> {{ userDetails.age }}</li>#}
{#                                <li class="list-group-item"><strong>Phone:</strong> {{ userDetails.phoneNo ?? '' }}</li>#}
{#                                <li class="list-group-item"><strong>Created At:</strong> {{ userDetails.createdAt|date('Y-m-d H:i:s') }}</li>#}
{#                                <li class="list-group-item"><strong>Updated At:</strong> {{ userDetails.updatedAt|date('Y-m-d H:i:s') }}</li>#}
{#                            </ul>#}
{#                        </div>#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}

{#        <!-- Action Panel -->#}
{#        <div class="row mt-4">#}
{#            <div class="col-12 col-md-3">#}
{#                <!-- Role-Specific Actions -->#}
{#                <div class="card h-100 bg-light" style="border-color: #10b981;">#}
{#                    <div class="card-header bg-success text-white" style="background-color: #10b981;">#}
{#                        <h5 class="mb-0">Actions</h5>#}
{#                    </div>#}
{#                    <div class="card-body">#}
{#                        <a href="{{ path('app_home_page') }}" class="btn btn-outline-dark w-100 mb-2" style="border-color: #1e3a8a; color: #1e3a8a;">HomePage</a>#}
{#                        {% if not isAdmin %}#}
{#                            <a href="{{ path('festival_index') }}" class="btn btn-outline-primary w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;">Show Festivals</a>#}
{#                            <a href="{{ path('artist_index') }}" class="btn btn-outline-success w-100 mb-2" style="border-color: #34d399; color: #34d399;">Show Artists</a>#}
{#                            <a href="{{ path('amenity_index') }}" class="btn btn-outline-warning w-100 mb-2" style="border-color: #f59e0b; color: #f59e0b;">Show Amenities</a>#}
{#                            <a href="{{ path('purchase_show') }}" class="btn btn-outline-info w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;">Show My Purchases</a>#}
{#                            <a href="{{ path('purchase_new') }}" class="btn btn-outline-info w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;">Make Purchase</a>#}
{#                            <a href="{{ path('review_show') }}" class="btn btn-outline-secondary w-100 mb-2" style="border-color: #6b7280; color: #6b7280;">Show My Reviews</a>#}
{#                        {% else %}#}
{#                            <button class="btn btn-outline-primary w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;" data-bs-toggle="collapse" data-bs-target="#festivalActions" aria-expanded="false" aria-controls="festivalActions">Festival</button>#}
{#                            <div class="collapse" id="festivalActions">#}
{#                                <a href="{{ path('festival_index') }}" class="btn btn-outline-primary w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;">List</a>#}
{#                                <a href="{{ path('festival_edit', {'id': festival.id}) }}" class="btn btn-outline-primary w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;">Edit</a>#}
{#                                <a href="{{ path('festival_update', {'id': festival.id}) }}" class="btn btn-outline-primary w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;">Update</a>#}
{#                                <a href="{{ path('festival_delete', {'id': festival.id}) }}" class="btn btn-outline-primary w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;">Delete</a>#}
{#                            </div>#}
{#                            <button class="btn btn-outline-success w-100 mb-2" style="border-color: #34d399; color: #34d399;" data-bs-toggle="collapse" data-bs-target="#artistActions" aria-expanded="false" aria-controls="artistActions">Artist</button>#}
{#                            <div class="collapse" id="artistActions">#}
{#                                <a href="{{ path('artist_index') }}" class="btn btn-outline-success w-100 mb-2" style="border-color: #34d399; color: #34d399;">List</a>#}
{#                                <a href="{{ path('artist_edit', {'id': artist.id}) }}" class="btn btn-outline-success w-100 mb-2" style="border-color: #34d399; color: #34d399;">Edit</a>#}
{#                                <a href="{{ path('artist_update', {'id': artist.id}) }}" class="btn btn-outline-success w-100 mb-2" style="border-color: #34d399; color: #34d399;">Update</a>#}
{#                                <a href="{{ path('artist_delete', {'id': artist.id}) }}" class="btn btn-outline-success w-100 mb-2" style="border-color: #34d399; color: #34d399;">Delete</a>#}
{#                            </div>#}
{#                            <button class="btn btn-outline-warning w-100 mb-2" style="border-color: #f59e0b; color: #f59e0b;" data-bs-toggle="collapse" data-bs-target="#amenityActions" aria-expanded="false" aria-controls="amenityActions">Amenity</button>#}
{#                            <div class="collapse" id="amenityActions">#}
{#                                <a href="{{ path('amenity_index') }}" class="btn btn-outline-warning w-100 mb-2" style="border-color: #f59e0b; color: #f59e0b;">List</a>#}
{#                                <a href="{{ path('amenity_edit', {'id': amenity.id}) }}" class="btn btn-outline-warning w-100 mb-2" style="border-color: #f59e0b; color: #f59e0b;">Edit</a>#}
{#                                <a href="{{ path('amenity_update', {'id': amenity.id}) }}" class="btn btn-outline-warning w-100 mb-2" style="border-color: #f59e0b; color: #f59e0b;">Update</a>#}
{#                                <a href="{{ path('amenity_delete', {'id': amenity.id}) }}" class="btn btn-outline-warning w-100 mb-2" style="border-color: #f59e0b; color: #f59e0b;">Delete</a>#}
{#                            </div>#}
{#                            <a href="{{ path('purchase_index') }}" class="btn btn-outline-info w-100 mb-2" style="border-color: #3b82f6; color: #3b82f6;">Purchase</a>#}
{#                            <a href="{{ path('review_index') }}" class="btn btn-outline-secondary w-100 mb-2" style="border-color: #6b7280; color: #6b7280;">Review</a>#}
{#                            <a href="{{ path('app_promote_user', {'id': user.id}) }}" class="btn btn-outline-danger w-100 mb-2" style="border-color: #ef4444; color: #ef4444;">Promote User</a>#}
{#                            <a href="{{ path('app_demote_user', {'id': user.id}) }}" class="btn btn-outline-danger w-100 mb-2" style="border-color: #ef4444; color: #ef4444;">Demote User</a>#}
{#                        {% endif %}#}
{#                    </div>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{#    </div>#}
{#{% endblock %}#}
