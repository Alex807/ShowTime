{% extends 'base.html.twig' %}

{% block title %}All Purchases - SoundScape Hub{% endblock %}

{% block body %}
    <div class="container profile-container">
        <div class="action-panel">
            <h3 class="action-title">
                <i class="fas fa-shopping-cart me-2"></i>
                All Purchases
            </h3>
            {% if purchases|length > 0 %}
                <div class="row">
                    {% for purchase in purchases %}
                        <div class="col-md-6 mb-3">
                            <div class="info-card">
                                <h5 class="info-card-title">
                                    <i class="fas fa-ticket-alt"></i>
                                    {{ purchase.edition.yearHappened }} - {{ purchase.edition.venueName }}
                                </h5>
                                <div class="info-item">
                                    <span class="info-label">User:</span>
                                    <span class="info-value">{{ purchase.user.email }}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Ticket Type:</span>
                                    <span class="info-value">{{ purchase.ticketType.name }}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Quantity:</span>
                                    <span class="info-value">{{ purchase.quantity }}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Total Price:</span>
                                    <span class="info-value">${{ (purchase.ticketType.price * purchase.quantity)|number_format(2) }}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Purchase Date:</span>
                                    <span class="info-value">{{ purchase.purchaseDate|date('F j, Y') }}</span>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
                {{ knp_pagination_render(purchases) }}
            {% else %}
                <div class="no-results">
                    <i class="fas fa-shopping-cart"></i>
                    <div>No purchases found.</div>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}
